# make scripts and programs

- `canvas.c2w.wcwidth*.cpp` ... These C++ codes are used to generate the character-width table by the C-library implementations and different terminal implementations.
  [`src/canvas.c2w.musl.sh`](../src/canvas.c2w.musl.sh) is generated by this program.
- `canvas.c2w.list-ucsver-detection-codes.sh` ... This script is used to analyze the character-width table based on the Unicode database.
  The character codes used by the test for [`bleopt char_width_{mode,version}=auto`] are determined based on the result of this script.
- `canvas.emoji.sh` ... This script is used to test the emoji supports of different terminals.
- `mwg_pp.awk` ... This is a preprocessor program written in AWK, which is used to preprocess and combine multiple shell scripts into a single file `ble.sh`.
  The source repository is [`akinomyoga/mwg_pp`](https://github.com/akinomyoga/mwg_pp).
- `debug.leakvar.exclude-list.txt` ... This is a white list for the global variables.


## `canvas.c2w.generate-table.sh`

This script file downloads data of Unicode properties from the Unicode database and
generates various tables.

```bash
$ make/canvas.c2w.generate-table.sh c2w

src/canvas.c2w.sh

$ make/canvas.c2w.generate-table.sh convert-custom-c2w <array-name> < input > output

src/canvas.c2w.musl.sh

$ make/canvas.c2w.generate-table.sh emoji

src/canvas.emoji.sh

$ make/canvas.c2w.generate-table.sh GraphemeClusterBreak

src/canvas.GraphemeClusterBreak.sh
lib/test-canvas.GraphemeClusterTest.sh

```

## Update airline themes in the contrib repository

First install `vim-airline` and `vim-airline-themes` using `vim-plug`. Then
create a directory at `out/data/airline`:

```bash
mkdir -p out/data/airline
```


Open Vim and run the following commands:

```vim
:source make/vim-airline.DumpAirlineThemes.vim
:call DumpAirlineThemeAll()
```

This can take time. Finally, you can run the following command in a ble.sh
session.

```bash
(source make/vim-airline.ConvertAirlineThemes.sh)
```
